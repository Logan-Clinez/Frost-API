{"version":3,"file":"Servers.js","sourceRoot":"","sources":["../../src/servers/Servers.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ServerOptions, RustServer, CommandResponse, RustServerInformation, FetchedServer } from \"./interfaces\";\nimport { GPortalRoutes, RCEEvent } from \"../constants\";\nimport type GPortalAuth from \"../auth/Auth\";\nimport type GPortalSocket from \"../socket/Socket\";\nimport type RCEManager from \"../Manager\";\nimport ServerUtils from \"../util/ServerUtils\";\nimport CommandHandler from \"./CommandHandler\";\nimport Helper from \"../helper\";\n\nexport default class ServerManager {\n  private _manager: RCEManager;\n  private _auth: GPortalAuth;\n  private _socket: GPortalSocket;\n  private _servers: Map<string, RustServer> = new Map();\n\n  public constructor(\n    manager: RCEManager,\n    auth: GPortalAuth,\n    socket: GPortalSocket\n  ) {\n    this._manager = manager;\n    this._auth = auth;\n    this._socket = socket;\n  }\n\n  /**\n   *\n   * @param opts {ServerOptions[]} - The server options\n   * @returns {Promise<void>} - Resolves once all servers have been added\n   * @description Adds multiple servers to the manager\n   *\n   * @example\n   * ```js\n   * await manager.servers.addMany([\n   *  {\n   *    identifier: \"my-server-id\",\n   *    serverId: 1234567,\n   *    region: \"EU\",\n   *    playerRefreshing: true,\n   *    radioRefreshing: true,\n   *    extendedEventRefreshing: true,\n   *    intents: [RCEIntent.All]\n   *  },\n   *  {\n   *    identifier: \"my-server-id-2\",\n   *    serverId: 7654321,\n   *    region: \"US\",\n   *    playerRefreshing: true,\n   *    radioRefreshing: true,\n   *    extendedEventRefreshing: true,\n   *    intents: [RCEIntent.All]\n   *  }\n   * ]);\n   * ```\n   */\n  public async addMany(opts: ServerOptions[]) {\n    await Promise.all(opts.map((opt) => this.add(opt)));\n  }\n\n  /**\n   *\n   * @param opts {ServerOptions} - The server options\n   * @returns {Promise<boolean>} - Whether the server was added successfully\n   * @description Adds a server to the manager\n   *\n   * @example\n   * ```js\n   * const server = await manager.servers.add({\n   *  identifier: \"my-server-id\",\n   *  serverId: 1234567,\n   *  region: \"EU\",\n   *  playerRefreshing: true,\n   *  radioRefreshing: true,\n   *  extendedEventRefreshing: true,\n   *  intents: [RCEIntent.All]\n   * });\n   * ```\n   */\n  public async add(opts: ServerOptions) {\n    this._manager.logger.debug(`Adding Server: ${opts.identifier}`);\n\n    if (!Array.isArray(opts.serverId) || !opts.serverId[1]) {\n      opts.serverId = [\n        Array.isArray(opts.serverId) ? opts.serverId[0] : opts.serverId,\n      ];\n\n      if (\n        !Number(opts.serverId[0]) ||\n        opts.serverId[0].toString().length !== 7\n      ) {\n        ServerUtils.error(\n          this._manager,\n          `[${opts.identifier}] Failed To Add Server: Invalid SID (Incorrect Length)`\n        );\n        return false;\n      }\n\n      const sid = await this.fetchId(\n        opts.identifier,\n        opts.serverId[0],\n        opts.region\n      );\n\n      if (sid) {\n        opts.serverId.push(sid);\n      }\n    }\n\n    if (!opts.serverId[1]) {\n      ServerUtils.error(\n        this._manager,\n        `[${opts.identifier}] Failed To Add Server: Invalid SID`\n      );\n      return false;\n    }\n\n    const status = await this.fetchStatus(\n      opts.identifier,\n      opts.serverId[1],\n      opts.region\n    );\n    if (!status) {\n      ServerUtils.error(\n        this._manager,\n        `[${opts.identifier}] Failed To Add Server: No Status Information`\n      );\n      return false;\n    }\n\n    if (status === \"SUSPENDED\") {\n      ServerUtils.error(\n        this._manager,\n        `[${opts.identifier}] Failed To Add Server: Suspended`\n      );\n      return false;\n    }\n\n    this._servers.set(opts.identifier, {\n      identifier: opts.identifier,\n      serverId: opts.serverId,\n      region: opts.region,\n      intervals: {\n        playerRefreshing: {\n          enabled: opts.playerRefreshing ?? false,\n          interval: opts.playerRefreshing\n            ? setInterval(() => {\n              const s = this.get(opts.identifier);\n              if (s?.status === \"RUNNING\") {\n                this.updatePlayers(opts.identifier);\n              }\n            }, 60000)\n            : undefined,\n        },\n        radioRefreshing: {\n          enabled: opts.radioRefreshing ?? false,\n          interval: opts.radioRefreshing\n            ? setInterval(() => {\n              const s = this.get(opts.identifier);\n              if (s?.status === \"RUNNING\") {\n                this.updateBroadcasters(opts.identifier);\n              }\n            }, 60000)\n            : undefined,\n        },\n        extendedEventRefreshing: {\n          enabled: opts.extendedEventRefreshing ?? false,\n          interval: opts.extendedEventRefreshing\n            ? setInterval(() => {\n              const s = this.get(opts.identifier);\n              if (s?.status === \"RUNNING\") {\n                this.fetchGibs(opts.identifier);\n              }\n            }, 60000)\n            : undefined,\n        },\n        timeRefreshing: {\n          enabled: opts.timeRefreshing ?? true,\n          interval: opts.timeRefreshing\n            ? setInterval(() => {\n                const s = this.get(opts.identifier);\n                if (s?.status === \"RUNNING\") {\n                  this.ServerTime(opts.identifier); // Call the new updateTime method\n                }\n              }, 60000)\n            : undefined,\n        },\n        fpsRefreshing: {\n          enabled: opts.fpsRefreshing ?? true,\n          interval: opts.fpsRefreshing\n            ? setInterval(() => {\n                const s = this.get(opts.identifier);\n                if (s?.status === \"RUNNING\") {\n                  this.ServerFPS(opts.identifier); // Call the updateFPS method to refresh FPS\n                }\n              }, 60000)\n            : undefined,\n        },\n      },\n      flags: [],\n      state: opts.state ?? [],\n      status: status as RustServer[\"status\"],\n      players: [],\n      frequencies: [],\n      intents: opts.intents,\n      retryCounts: undefined\n    });\n\n    const server = this._servers.get(opts.identifier);\n    this._socket.addServer(server);\n\n    this._manager.logger.debug(\n      `[${server.identifier}] Server Status: ${status}`\n    );\n\n    if (status === \"RUNNING\") {\n      await ServerUtils.setReady(this._manager, server, true);\n\n      if (opts.playerRefreshing) {\n        await this.updatePlayers(opts.identifier);\n      }\n\n      if (opts.radioRefreshing) {\n        await this.updateBroadcasters(opts.identifier);\n      }\n\n      if (opts.extendedEventRefreshing) {\n        await this.fetchGibs(opts.identifier);\n      }\n\n      if (opts.timeRefreshing) {\n        await this.ServerTime(opts.identifier); // Directly calling updateTime here if required\n      }\n\n      if (opts.fpsRefreshing) {\n        await this.ServerFPS(opts.identifier); // Directly calling updateTime here if required\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   *\n   * @param server {RustServer} - The server to update\n   * @returns {void}\n   * @description Updates a server\n   *\n   * @example\n   * ```js\n   * manager.servers.update(server);\n   * ```\n   */\n  public update(server: RustServer) {\n    this._manager.logger.debug(`[${server.identifier}] Updating Server`);\n\n    this._servers.set(server.identifier, server);\n  }\n\n  /**\n   * @returns {void}\n   * @description Removes all servers from the manager\n   *\n   * @example\n   * ```js\n   * manager.servers.removeAll();\n   * ```\n   */\n  public removeAll() {\n    this._servers.forEach((server) => this.remove(server));\n  }\n\n  /**\n   *\n   * @param identifiers {string[]} - The server identifiers to remove\n   * @returns {void}\n   * @description Removes multiple servers from the manager\n   *\n   * @example\n   * ```js\n   * manager.servers.removeMany([\"my-server-id\", \"my-server-id-2\"]);\n   * ```\n   */\n  public removeMany(identifiers: string[]) {\n    identifiers.forEach((identifier) => {\n      const server = this.get(identifier);\n      if (server) {\n        this.remove(server);\n      }\n    });\n  }\n\n  /**\n   *\n   * @param server {RustServer} - The server to remove\n   * @returns {void}\n   * @description Removes a server from the manager\n   *\n   * @example\n   * ```js\n   * manager.servers.remove(server);\n   * ```\n   */\n  public remove(server: RustServer) {\n    this._manager.logger.debug(`[${server.identifier}] Removing Server`);\n\n    clearInterval(server.intervals.playerRefreshing.interval);\n    clearInterval(server.intervals.radioRefreshing.interval);\n    clearInterval(server.intervals.extendedEventRefreshing.interval);\n    this._socket.removeServer(server);\n    this._servers.delete(server.identifier);\n\n  }\n\n  /**\n   *\n   * @param identifier {string} - The server identifier\n   * @returns {RustServer | undefined} - The server\n   * @description Gets a server by its identifier\n   *\n   * @example\n   * ```js\n   * const server = manager.servers.get(\"my-server-id\");\n   * ```\n   */\n  public get(identifier: string) {\n    return this._servers.get(identifier);\n  }\n\n  /**\n   *\n   * @returns {RustServer[]} - All servers\n   * @description Gets all servers\n   *\n   * @example\n   * ```js\n   * const servers = manager.servers.getAll();\n   * ```\n   */\n  public getAll() {\n    return this._servers;\n  }\n\n  /**\n   *\n   * @param identifier - The server identifier\n   * @param rawHostname - Whether to return the raw hostname\n   * @returns {Promise<RustServerInformation | null>} - The server information\n   *\n   * @example\n   * ```js\n   * const info = await manager.servers.info(\"my-server-id\");\n   * ```\n   *\n   * @example\n   * ```js\n   * const info = await manager.servers.info(\"my-server-id\", true);\n   * ```\n   */\n  public async info(identifier: string, rawHostname: boolean = false) {\n    const server = this.get(identifier);\n    if (!server) {\n      ServerUtils.error(this._manager, `[${identifier}] Invalid Server`);\n      return null;\n    }\n  \n    let retries = 0;\n    const maxRetries = 5;\n  \n    while (retries < maxRetries) {\n      const info = await this.command(server.identifier, \"serverinfo\", true);\n      if (info?.response) {\n        const data: RustServerInformation = Helper.cleanOutput(info.response, true, rawHostname);\n        return data;\n      }\n  \n      retries++;\n      this._manager.logger.warn(`[${identifier}] Retry ${retries}/${maxRetries}: Failed to Fetch Server Info`);\n      \n      await new Promise(resolve => setTimeout(resolve, retries * 2000));\n    }\n  \n    ServerUtils.error(this._manager, \"Failed To Fetch Server Info After 5 Retries\", server);\n    return null;\n  }  \n\n  /**\n   *\n   * @param identifier - The server identifier\n   * @param command - The command to send\n   * @param response - Whether to wait for a response\n   * @returns {Promise<CommandResponse>} - The command response\n   *\n   * @example\n   * ```js\n   * await manager.servers.command(\"my-server-id\", \"say Hello World!\");\n   * ```\n   *\n   * @example\n   * ```js\n   * const response = await manager.servers.command(\"my-server-id\", \"getauthlevels\", true);\n   * ```\n   */\n  public async command(\n    identifier: string,\n    command: string,\n    response: boolean = false\n  ): Promise<CommandResponse> {\n    const token = this._auth?.accessToken;\n    if (!token) {\n      ServerUtils.error(\n        this._manager,\n        `[${identifier}] Failed To Send Command: No Access Token`\n      );\n      return { ok: false, error: \"No Access Token\" };\n    }\n\n    const server = this._servers.get(identifier);\n    if (!server) {\n      ServerUtils.error(\n        this._manager,\n        `[${identifier}] Failed To Send Command: Invalid Server`\n      );\n      return { ok: false, error: \"Invalid Server\" };\n    }\n\n    if (server.status !== \"RUNNING\") {\n      this._manager.logger.warn(\n        `[${identifier}] Failed To Send Command: Server Not Running`\n      );\n      return { ok: false, error: \"Server Not Running\" };\n    }\n\n    this._manager.logger.debug(`[${identifier}] Sending Command: ${command}`);\n\n    const payload = {\n      operationName: \"sendConsoleMessage\",\n      variables: {\n        sid: server.serverId[1],\n        region: server.region,\n        message: command,\n      },\n      query:\n        \"mutation sendConsoleMessage($sid: Int!, $region: REGION!, $message: String!) {\\n  sendConsoleMessage(rsid: {id: $sid, region: $region}, message: $message) {\\n    ok\\n    __typename\\n  }\\n}\",\n    };\n\n    if (response) {\n      return new Promise(async (resolve, reject) => {\n        CommandHandler.add({\n          identifier,\n          command,\n          resolve,\n          reject,\n        });\n\n        try {\n          const response = await fetch(GPortalRoutes.Api, {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n            body: JSON.stringify(payload),\n          });\n\n          if (!response.ok) {\n            ServerUtils.error(\n              this._manager,\n              `Failed To Send Command: HTTP ${response.status} ${response.statusText}`,\n              server\n            );\n            CommandHandler.remove(CommandHandler.get(identifier, command));\n            resolve({\n              ok: false,\n              error: `HTTP ${response.status} ${response.statusText}`,\n            });\n          }\n\n          const data = await response.json();\n          if (!data?.data?.sendConsoleMessage?.ok) {\n            ServerUtils.error(\n              this._manager,\n              \"Failed To Send Command: AioRpcError\",\n              server\n            );\n            CommandHandler.remove(CommandHandler.get(identifier, command));\n            resolve({\n              ok: false,\n              error: \"AioRpcError\",\n            });\n          }\n\n          const cmd = CommandHandler.get(identifier, command);\n          if (cmd) {\n            cmd.timeout = setTimeout(() => {\n              CommandHandler.remove(CommandHandler.get(identifier, command));\n              resolve({\n                ok: true,\n                response: undefined,\n              });\n            }, 3_000);\n          }\n        } catch (error) {\n          CommandHandler.remove(CommandHandler.get(identifier, command));\n          resolve({\n            ok: false,\n            error: error.message,\n          });\n        }\n      });\n    } else {\n      try {\n        const response = await fetch(GPortalRoutes.Api, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(payload),\n        });\n\n        if (!response.ok) {\n          ServerUtils.error(\n            this._manager,\n            `Failed To Send Command: HTTP ${response.status} ${response.statusText}`,\n            server\n          );\n          return {\n            ok: false,\n            error: `HTTP ${response.status} ${response.statusText}`,\n          };\n        }\n\n        return {\n          ok: true,\n          response: undefined,\n        };\n      } catch (error) {\n        ServerUtils.error(\n          this._manager,\n          `Failed To Send Command: ${error}`,\n          server\n        );\n        return {\n          ok: false,\n          error: error.message,\n        };\n      }\n    }\n  }\n\n  private async updateBroadcasters(identifier: string) {\n    const server = this.get(identifier);\n    if (!server) {\n      return this._manager.logger.warn(\n        `[${identifier}] Failed To Update Broadcasters: Invalid Server`\n      );\n    }\n  \n    this._manager.logger.debug(`[${server.identifier}] Updating Broadcasters`);\n  \n    server.retryCounts = server.retryCounts || { broadcasters: 0 };\n  \n    const fetchBroadcastersWithRetry = async (): Promise<any> => {\n      let attempt = 0;\n      while (true) {\n        attempt += 1;\n        const response = await this.command(\n          server.identifier,\n          \"rf.listboardcaster\",\n          true\n        );\n  \n        if (response?.response) {\n          server.retryCounts.broadcasters = 0;\n          return response;\n        }\n  \n        server.retryCounts.broadcasters = attempt;\n  \n        await new Promise((resolve) => setTimeout(resolve, attempt * 1000));\n      }\n    };\n  \n    const broadcasters = await fetchBroadcastersWithRetry();\n  \n    const broadcasts = [];\n    const regex =\n      /\\[(\\d+) MHz\\] Position: \\(([\\d.-]+), ([\\d.-]+), ([\\d.-]+)\\), Range: (\\d+)/g;\n    let match: string[];\n  \n    while ((match = regex.exec(broadcasters.response)) !== null) {\n      const frequency = parseInt(match[1], 10);\n      const coordinates = [\n        parseFloat(match[2]),\n        parseFloat(match[3]),\n        parseFloat(match[4]),\n      ];\n      const range = parseInt(match[5], 10);\n  \n      broadcasts.push({ frequency, coordinates, range });\n    }\n  \n    server.frequencies.forEach((freq) => {\n      if (!broadcasts.find((b) => parseInt(b.frequency) === freq)) {\n        this._manager.events.emit(RCEEvent.FrequencyLost, {\n          server,\n          frequency: freq,\n        });\n  \n        server.frequencies = server.frequencies.filter((f) => f !== freq);\n      }\n    });\n  \n    broadcasts.forEach((broadcast) => {\n      if (server.frequencies.includes(broadcast.frequency)) return;\n      server.frequencies.push(broadcast.frequency);\n  \n      if (broadcast.frequency === 4765) {\n        this._manager.events.emit(RCEEvent.EventStart, {\n          server,\n          event: \"Small Oil Rig\",\n          special: false,\n        });\n      } else if (broadcast.frequency === 4768) {\n        this._manager.events.emit(RCEEvent.EventStart, {\n          server,\n          event: \"Oil Rig\",\n          special: false,\n        });\n      }\n  \n      this._manager.events.emit(RCEEvent.FrequencyGained, {\n        server,\n        frequency: broadcast.frequency,\n        coordinates: broadcast.coordinates,\n        range: broadcast.range,\n      });\n    });\n  \n    this.update(server);\n  \n    this._manager.logger.debug(`[${server.identifier}] Broadcasters Updated`);\n  }  \n\n  private async fetchGibs(identifier: string) {\n    const server = this.get(identifier);\n    if (!server) {\n      return this._manager.logger.warn(\n        `[${identifier}] Failed To Fetch Gibs: Invalid Server`\n      );\n    }\n  \n    this._manager.logger.debug(`[${server.identifier}] Fetching Gibs`);\n  \n    server.retryCounts = server.retryCounts || { gibs: 0 };\n  \n    const fetchGibsWithRetry = async (): Promise<any> => {\n      let attempt = 0;\n      while (true) {\n        attempt += 1;\n        const bradley = await this.command(\n          server.identifier,\n          \"find_entity servergibs_bradley\",\n          true\n        );\n        const heli = await this.command(\n          server.identifier,\n          \"find_entity servergibs_patrolhelicopter\",\n          true\n        );\n  \n        if (bradley?.response && heli?.response) {\n          server.retryCounts.gibs = 0;\n          return { bradley, heli };\n        }\n  \n        server.retryCounts.gibs = attempt;\n  \n        await new Promise((resolve) => setTimeout(resolve, attempt * 1000));\n      }\n    };\n  \n    const { bradley, heli } = await fetchGibsWithRetry();\n  \n    if (\n      bradley.response.includes(\"servergibs_bradley\") &&\n      !server.flags.includes(\"BRADLEY\")\n    ) {\n      server.flags.push(\"BRADLEY\");\n  \n      setTimeout(() => {\n        const s = this.get(server.identifier);\n        if (s) {\n          s.flags = s.flags.filter((f) => f !== \"BRADLEY\");\n          this.update(s);\n        }\n      }, 60_000 * 10);\n  \n      this._manager.events.emit(RCEEvent.EventStart, {\n        server,\n        event: \"Bradley APC Debris\",\n        special: false,\n      });\n    }\n  \n    if (\n      heli.response.includes(\"servergibs_patrolhelicopter\") &&\n      !server.flags.includes(\"HELICOPTER\")\n    ) {\n      server.flags.push(\"HELICOPTER\");\n  \n      setTimeout(() => {\n        const s = this.get(server.identifier);\n        if (s) {\n          s.flags = s.flags.filter((f) => f !== \"HELICOPTER\");\n          this.update(s);\n        }\n      }, 60_000 * 10);\n  \n      this._manager.events.emit(RCEEvent.EventStart, {\n        server,\n        event: \"Patrol Helicopter Debris\",\n        special: false,\n      });\n    }\n  \n    this.update(server);\n  \n    this._manager.logger.debug(`[${server.identifier}] Gibs Fetched`);\n  }  \n\n  private async updatePlayers(identifier: string) {\n    const server = this.get(identifier);\n    if (!server) {\n      return this._manager.logger.warn(\n        `[${identifier}] Failed To Update Players: Invalid Server`\n      );\n    }\n  \n    this._manager.logger.debug(`[${server.identifier}] Updating Players`);\n  \n    server.retryCounts = server.retryCounts || { players: 0 };\n  \n    const fetchPlayersWithRetry = async (): Promise<any> => {\n      let attempt = 0;\n      while (true) {\n        attempt += 1;\n        const response = await this.command(server.identifier, \"Users\", true);\n  \n        if (response?.response) {\n          server.retryCounts.players = 0;\n          return response;\n        }\n  \n        server.retryCounts.players = attempt;\n  \n        await new Promise((resolve) => setTimeout(resolve, attempt * 1000));\n      }\n    };\n  \n    const players = await fetchPlayersWithRetry();\n  \n    const playerlist = players.response\n      .match(/\"(.*?)\"/g)\n      .map((ign) => ign.replace(/\"/g, \"\"));\n    playerlist.shift();\n  \n    const { joined, left } = Helper.comparePopulation(\n      server.players,\n      playerlist\n    );\n  \n    joined.forEach((player) => {\n      this._manager.events.emit(RCEEvent.PlayerJoined, {\n        server,\n        ign: player,\n      });\n    });\n  \n    left.forEach((player) => {\n      this._manager.events.emit(RCEEvent.PlayerLeft, {\n        server,\n        ign: player,\n      });\n    });\n  \n    server.players = playerlist;\n    this.update(server);\n  \n    this._manager.events.emit(RCEEvent.PlayerListUpdated, {\n      server,\n      players: playerlist,\n      joined,\n      left,\n    });\n  \n    this._manager.logger.debug(`[${server.identifier}] Players Updated`);\n  }\n  \n  private async ServerTime(identifier: string) {\n    const server = this.get(identifier);\n    if (!server) {\n      return this._manager.logger.warn(\n        `[${identifier}] Failed To Update Time: Invalid Server`\n      );\n    }\n\n    this._manager.logger.debug(`[${server.identifier}] Updating Time`);\n\n    server.retryCounts = server.retryCounts || { time: 0 };\n\n    const fetchTimeWithRetry = async (): Promise<any> => {\n      let attempt = 0;\n      while (true) {\n        attempt += 1;\n        const response = await this.command(server.identifier, \"env.time\", true);\n\n        if (response?.response) {\n          server.retryCounts.time = 0;\n          return response;\n        }\n\n        server.retryCounts.time = attempt;\n\n        await new Promise((resolve) => setTimeout(resolve, attempt * 1000));\n      }\n    };\n\n    const time = await fetchTimeWithRetry();\n\n    const extractedTime = time.response\n      .match(/(\\d+)/)?.[0] || null;\n\n    if (extractedTime) {\n      this._manager.events.emit(RCEEvent.Time, {\n        server,\n        time: extractedTime,\n      });\n\n      this._manager.logger.debug(`[${server.identifier}] Time Updated: ${extractedTime}`);\n    } else {\n      this._manager.logger.warn(`[${server.identifier}] Failed To Retrieve Valid Time`);\n    }\n  }\n\n  private async ServerFPS(identifier: string) {\n    const server = this.get(identifier);\n    if (!server) {\n      return this._manager.logger.warn(\n        `[${identifier}] Failed To Update FPS: Invalid Server`\n      );\n    }\n  \n    this._manager.logger.debug(`[${server.identifier}] Updating FPS`);\n  \n    server.retryCounts = server.retryCounts || { fps: 0 };\n  \n    const fetchFPSWithRetry = async (): Promise<any> => {\n      let attempt = 0;\n      while (true) {\n        attempt += 1;\n        const response = await this.command(server.identifier, \"FPS\", true); // Assume \"FPS\" is the command to fetch FPS\n  \n        if (response?.response) {\n          server.retryCounts.fps = 0;\n          return response;\n        }\n  \n        server.retryCounts.fps = attempt;\n  \n        // Wait before retrying, with increasing wait times\n        await new Promise((resolve) => setTimeout(resolve, attempt * 1000));\n      }\n    };\n  \n    const fps = await fetchFPSWithRetry();\n  \n    const newFPS = fps.response?.env?.fps; // Assuming the response structure is like { env: { fps: \"30.25\" } }\n  \n    if (newFPS) {\n      // Emit the FPS update event\n      this._manager.events.emit(RCEEvent.ServerFPS, {\n        server,\n        fps: newFPS, // Emit the new FPS value\n      });\n  \n      this._manager.logger.debug(`[${server.identifier}] FPS Updated: ${newFPS}`);\n    } else {\n      this._manager.logger.warn(`[${server.identifier}] Failed To Retrieve Valid FPS`);\n    }\n  }  \n\n  /**\n   *\n   * @param region - The region to fetch servers from\n   * @returns {Promise<FetchedServer[]>} - The fetched servers\n   * @description Fetches servers from the authorized GPortal account\n   *\n   * @example\n   * ```js\n   * const servers = await manager.servers.fetchServers(\"EU\");\n   * ```\n   *\n   * @example\n   * ```js\n   * const servers = await manager.servers.fetchServers(\"US\");\n   * ```\n   *\n   * @example\n   * ```js\n   * const servers = await manager.servers.fetchServers();\n   * ```\n   */\n  public async fetchServers(region?: \"US\" | \"EU\"): Promise<FetchedServer[]> {\n    const token = this._auth?.accessToken;\n    if (!token) {\n      this._manager.logger.warn(\"Failed To Fetch Servers: No Access Token\");\n      return [];\n    }\n\n    this._manager.logger.debug(\"Fetching Servers\");\n\n    if (!region) {\n      const eu = await this.fetchServers(\"EU\");\n      const us = await this.fetchServers(\"US\");\n      return [...eu, ...us];\n    }\n\n    try {\n      const response = await fetch(\n        `${GPortalRoutes.Origin}/${\n          region === \"EU\" ? \"eur\" : \"int\"\n        }/menu/clouds`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (!response.ok) {\n        this._manager.logger.warn(\n          `Failed To Fetch Servers: ${response.status} ${response.statusText}`\n        );\n        return [];\n      }\n\n      const data = await response.json();\n      const fetchedServers: FetchedServer[] = data?.items\n        ?.filter((s) => s.label.includes(\"Rust\"))\n        .map((s) => {\n          return {\n            rawName: s.items[0].label,\n            name: s.items[0].label.replace(/<color=[^>]+>|<\\/color>/g, \"\"),\n            region,\n            sid: [Number(s.items[0].data.url.split(\"/\")[4])],\n          };\n        });\n\n      const resolveIdsRequest = await fetch(\n        `${GPortalRoutes.Origin}/${region === \"EU\" ? \"eur\" : \"int\"}/serviceIds`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (!resolveIdsRequest.ok) {\n        this._manager.logger.warn(\n          `Failed To Fetch Servers: ${resolveIdsRequest.status} ${resolveIdsRequest.statusText}`\n        );\n        return fetchedServers ?? [];\n      }\n\n      const resolvedIds = await resolveIdsRequest.json();\n      fetchedServers?.forEach((s) => {\n        const resolvedId = resolvedIds.find((r) => r.serverId === s.sid[0]);\n        if (resolvedId) {\n          s.sid.push(resolvedId.serviceId);\n        }\n      });\n\n      return fetchedServers ?? [];\n    } catch (error) {\n      ServerUtils.error(this._manager, `Failed To Fetch Servers: ${error}`);\n      return [];\n    }\n  }\n\n  private async fetchStatus(\n    identifier: string,\n    sid: number,\n    region: \"EU\" | \"US\"\n  ) {\n    const token = this._auth?.accessToken;\n    if (!token) {\n      console.error(\n        `[${identifier}] Failed To Fetch Server Status: No Access Token`\n      );\n      return null;\n    }\n\n    this._manager.logger.debug(`[${identifier}] Fetching Server Status`);\n\n    try {\n      const response = await fetch(GPortalRoutes.Api, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          operationName: \"ctx\",\n          variables: {\n            sid,\n            region,\n          },\n          query:\n            \"query ctx($sid: Int!, $region: REGION!) {\\n  cfgContext(rsid: {id: $sid, region: $region}) {\\n    ns {\\n      ...CtxFields\\n      __typename\\n    }\\n    errors {\\n      mutator\\n      affectedPaths\\n      error {\\n        class_\\n        args\\n        __typename\\n      }\\n      scope\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment GameServerFields on GameServer {\\n  id\\n  serverName\\n  serverPort\\n  serverIp\\n  __typename\\n}\\n\\nfragment PermissionFields on Permission {\\n  userName\\n  created\\n  __typename\\n}\\n\\nfragment MysqlDbFields on CustomerMysqlDb {\\n  httpUrl\\n  host\\n  port\\n  database\\n  username\\n  password\\n  __typename\\n}\\n\\nfragment ServiceStateFields on ServiceState {\\n  state\\n  fsmState\\n  fsmIsTransitioning\\n  fsmIsExclusiveLocked\\n  fsmFileAccess\\n  fsmLastStateChange\\n  fsmStateLiveProgress {\\n    ... on InstallProgress {\\n      action\\n      percentage\\n      __typename\\n    }\\n    ... on BroadcastProgress {\\n      nextMessageAt\\n      stateExitAt\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment RestartTaskFields on RestartTask {\\n  id\\n  runOnWeekday\\n  runOnDayofmonth\\n  runAtTimeofday\\n  runInTimezone\\n  schedule\\n  data {\\n    description\\n    args\\n    scheduleExtended\\n    nextFireTime\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment DisplayPortFields on DisplayPorts {\\n  rconPort\\n  queryPort\\n  __typename\\n}\\n\\nfragment SteamWorkshopItemFields on SteamWorkshopItem {\\n  id\\n  appId\\n  itemType\\n  name\\n  links {\\n    websiteUrl\\n    __typename\\n  }\\n  summary\\n  logo {\\n    url\\n    __typename\\n  }\\n  maps {\\n    workshopId\\n    mapName\\n    __typename\\n  }\\n  dateCreated\\n  dateModified\\n  __typename\\n}\\n\\nfragment SevenDaysModFields on SevenDaysMod {\\n  id\\n  name\\n  repoKey\\n  active\\n  created\\n  modified\\n  __typename\\n}\\n\\nfragment MapParams on FarmingSimulatorMapParamsObject {\\n  serverIp\\n  webServerPort\\n  webStatsCode\\n  token\\n  __typename\\n}\\n\\nfragment CtxFields on RootNamespace {\\n  sys {\\n    game {\\n      name\\n      key\\n      platform\\n      forumBoardId\\n      supportedPlatforms\\n      __typename\\n    }\\n    extraGameTranslationKeys\\n    gameServer {\\n      ...GameServerFields\\n      __typename\\n    }\\n    permissionsOwner {\\n      ...PermissionFields\\n      __typename\\n    }\\n    permissions {\\n      ...PermissionFields\\n      __typename\\n    }\\n    mysqlDb {\\n      ...MysqlDbFields\\n      __typename\\n    }\\n    __typename\\n  }\\n  service {\\n    config {\\n      rsid {\\n        id\\n        region\\n        __typename\\n      }\\n      type\\n      hwId\\n      state\\n      ftpUser\\n      ftpPort\\n      ftpPassword\\n      ftpReadOnly\\n      ipAddress\\n      rconPort\\n      queryPort\\n      autoBackup\\n      dnsNames\\n      currentVersion\\n      targetVersion\\n      __typename\\n    }\\n    latestRev {\\n      id\\n      created\\n      __typename\\n    }\\n    maxSlots\\n    files\\n    memory {\\n      base\\n      effective\\n      __typename\\n    }\\n    currentState {\\n      ...ServiceStateFields\\n      __typename\\n    }\\n    backups {\\n      id\\n      userSize\\n      created\\n      isAutoBackup\\n      __typename\\n    }\\n    restartSchedule {\\n      ...RestartTaskFields\\n      __typename\\n    }\\n    dnsAvailableTlds\\n    __typename\\n  }\\n  admin {\\n    hardwareGuacamoleConnection {\\n      url\\n      __typename\\n    }\\n    __typename\\n  }\\n  profile {\\n    __typename\\n    ... on ProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on MinecraftProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        additionalPorts\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      worlds\\n      addonRam\\n      isRamServer\\n      ramOrderCreationDate\\n      ramStopTimeUtc\\n      isConnectedToBungeecord\\n      bungeecordServerUrl\\n      executables {\\n        id\\n        name\\n        key\\n        default\\n        __typename\\n      }\\n      mods {\\n        id\\n        repoKey\\n        name\\n        image\\n        mindRam\\n        projectUrl\\n        revisions {\\n          id\\n          created\\n          executableId\\n          extraData\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on CsgoProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        gotvPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      selectedWorkshopItems {\\n        ...SteamWorkshopItemFields\\n        __typename\\n      }\\n      installedMaps {\\n        name\\n        displayName\\n        workshopItem {\\n          ...SteamWorkshopItemFields\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on ValheimProfileNamespace {\\n      name\\n      cfgFiles\\n      clientLink\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on HellLetLooseProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        statsPort\\n        beaconPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on SevenDaysToDieProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        telnetPort\\n        webDashboardPort\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      availableMods {\\n        ...SevenDaysModFields\\n        __typename\\n      }\\n      isModUpdateAvailable\\n      __typename\\n    }\\n    ... on SoulmaskProfileNamespace {\\n      name\\n      cfgFiles\\n      gameUid\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on VRisingProfileNamespace {\\n      name\\n      cfgFiles\\n      isLaunchServer\\n      isOfficialServer\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      __typename\\n    }\\n    ... on RustConsoleProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      modifyActionHints\\n      __typename\\n    }\\n    ... on FarmingSimulatorProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      wiLink\\n      defaultModSpace\\n      masterWiLink\\n      displayPorts {\\n        rconPort\\n        queryPort\\n        webPort\\n        __typename\\n      }\\n      mapParams {\\n        ...MapParams\\n        __typename\\n      }\\n      __typename\\n    }\\n    ... on BungeecordProfileNamespace {\\n      name\\n      cfgFiles\\n      logFiles\\n      publicConfigs\\n      configDefinition\\n      displayPorts {\\n        ...DisplayPortFields\\n        __typename\\n      }\\n      enableCustomerDb\\n      enableCustomHostnames\\n      gpServers\\n      accessibleMinecraftServers {\\n        ...GameServerFields\\n        __typename\\n      }\\n      __typename\\n    }\\n  }\\n  __typename\\n}\",\n        }),\n      });\n\n      if (!response.ok) {\n        ServerUtils.error(\n          this._manager,\n          `[${identifier}] Failed To Fetch Server Status: ${response.status} ${response.statusText}`\n        );\n        return null;\n      }\n\n      const data = await response.json();\n      return data?.data?.cfgContext?.ns?.service?.currentState\n        ?.state as RustServer[\"status\"];\n    } catch (error) {\n      ServerUtils.error(\n        this._manager,\n        `[${identifier}] Failed To Fetch Server Status: ${error.message}`\n      );\n      return null;\n    }\n  }\n\n  private async fetchId(identifier: string, sid: number, region: \"EU\" | \"US\") {\n    const token = this._auth?.accessToken;\n    if (!token) {\n      ServerUtils.error(\n        this._manager,\n        `[${identifier}] Failed To Fetch Server ID: No Access Token`\n      );\n      return null;\n    }\n\n    this._manager.logger.debug(`[${identifier}] Fetching Server ID`);\n\n    try {\n      const response = await fetch(GPortalRoutes.Api, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          operationName: \"sid\",\n          variables: {\n            gameserverId: Number(sid),\n            region,\n          },\n          query:\n            \"query sid($gameserverId: Int!, $region: REGION!) {\\n  sid(gameserverId: $gameserverId, region: $region)\\n}\",\n        }),\n      });\n\n      if (!response.ok) {\n        ServerUtils.error(\n          this._manager,\n          `[${identifier}] Failed To Fetch Server ID: ${response.status} ${response.statusText}`\n        );\n        return null;\n      }\n\n      const data = await response.json();\n      if (data?.errors?.length) {\n        this._manager.logger.warn(\n          `[${identifier}] Failed To Fetch Server ID: ${data.errors[0].message}`\n        );\n        return null;\n      }\n\n      const serverId = data?.data?.sid as number;\n      if (!serverId) {\n        ServerUtils.error(\n          this._manager,\n          `[${identifier}] Failed To Fetch Server ID: Invalid SID`\n        );\n        return null;\n      }\n\n      return serverId;\n    } catch (error) {\n      ServerUtils.error(\n        this._manager,\n        `[${identifier}] Failed To Fetch Server ID: ${error.message}`\n      );\n      return null;\n    }\n  }\n}\n"]}